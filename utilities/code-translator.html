<!doctype html>

<html>

<head>
    
    <title></title>

</head>

<body>

    <header></header>

    <hr />

    <main>

		<div class="converter-container">

            <div class="left-container">
                
                <textarea id="left" placeholder="Inserire il testo"></textarea>

                <select id="type-left">
                    <!-- <option value=""></option> -->
                    <option value="binary">Binario</option>
                    <option value="hexadecimal">Esadecimale</option>
                    <option value="morse">Morse</option>
                    <option value="octal">Ottale</option>
                    <option value="text" selected>Testo semplice</option>
                </select>
                
            </div>

            <div class="right-container">
                
                <textarea id="right" placeholder="Inserire il testo"></textarea>

                <select id="type-right">
                    <!-- <option value=""></option> -->
                    <option value="binary">Binario</option>
                    <option value="hexadecimal">Esadecimale</option>
                    <option value="morse">Morse</option>
                    <option value="octal">Ottale</option>
                    <option value="text" selected>Testo semplice</option>
                </select>
                
            </div>

		</div>

        <p>
            Questa sezione è attualmente in fase di sviluppo ma è possibile usufruire di alcuni traduttori.

            <br />

            Ognuno può convertire tutte le lettere (minuscole e maiuscole), tutti i numeri MA un numero limitato di simboli:
            <ul>
                <li>
                    Da testo a Morse
                    <ul>
                        <li>. , : ; ? ! " ' = _ @ ) ( /</li>
                    </ul>
                </li>
            </ul>
        </p>

    </main>

    <hr />

    <footer></footer>

    <!-- File JavaScript generico -->
    <script src="./../Static/javascript/scripts.js" type="module"></script>
    <script type="module">

        import {
            UserText
        } from 'https://GianlucaSpendolini.github.io/Static/javascript/util_class.js';

        document.addEventListener('DOMContentLoaded', () => {

            // Prendo i text area
            let left = document.getElementById('left');
            let right = document.getElementById('right');

            // Prendo i select
            let select_left = document.getElementById('type-left');
            let select_right = document.getElementById('type-right');
            // Creo valori iniziali
            let type_left = select_left.value;
            let type_right = select_right.value;

            // console.log("tot:", type_left, type_right);

            // Aggiungo l'evento al select di sx
            select_left.addEventListener('change', () => {
                type_left = select_left.value;

                // console.log("select l:", type_left);
            });

            // Aggiungo l'evento al select di dx
            select_right.addEventListener('change', () => {
                type_right = select_right.value;

                // console.log("select r:", type_right);
            });

            // Variabile in cui inserire il valore convertito
            let converted;

            // Aggiungo l'evento al textarea di sx
            left.addEventListener('input', () => {
                // Prendo il contenuto di sinistra 
                let content = left.value;

                // Converto
                let to_convert = new UserText(content);

                // Prendo la specifica dalla lista
                switch (type_right) {

                    // Morse
                    case 'morse': 
                        converted = to_convert.convert(type_left).toMorse();
                        break;

                    // Text
                    case 'text': 
                        converted = to_convert.convert(type_left).toText();
                        break;

                    default: 
                        break;

                }
                console.log(converted);

                // Inserisco nel textarea del codice morse
                right.value = converted;
            });

            // Aggiungo l'evento al textarea di dx
            right.addEventListener('input', () => {
                // Prendo il contenuto di destra 
                let content = right.value;

                // Converto
                let to_convert = new UserText(content);

                // Prendo la specifica dalla lista
                switch (type_left) {

                    // Morse
                    case 'morse': 
                        converted = to_convert.convert(type_right).toMorse();
                        break;

                    // Text
                    case 'text': 
                        converted = to_convert.convert(type_right).toText();
                        break;

                    default: 
                        break;

                }
                console.log(converted);

                // Inserisco nel textarea del testo normale
                left.value = converted;
            });

        });

    </script>
    
</body>

</html>